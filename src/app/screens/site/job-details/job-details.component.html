<div class="page-wrapper">
  <div class="container">
    <div class="row">
      <div class="col-xl-12">
        <!-- loader -->
        <div
          class="d-flex flex-row justify-content-center align-items-center p-5"
        >
          <span *ngIf="isJobLoading" class="spinner-border text-primary"></span>
        </div>

        <!-- job header -->
        <div *ngIf="!isJobLoading" class="d-flex flex-column flex-md-row gap-3">
          <i class="bi bi-box fs-1 text-secondary"></i>
          <div class="flex-grow-1">
            <a href="#!"
              ><p
                class="mb-2 text-secondary text-decoration-underline fw-medium font-15"
              >
                ObjectThemes
              </p></a
            >
            <h5 class="font-17">{{ job_title }}</h5>
            <ul
              class="d-flex align-items-center gap-2 list-unstyled mb-0 font-13 text-muted flex-wrap"
            >
              <li>
                <i class="bi bi-geo-alt align-baseline me-1"></i>
                {{ job_location }}
              </li>
              <li class="vr"></li>
              <li>
                <i class="bi bi-cash align-baseline me-1"></i>
                {{ job_salary_min }}FCFA - {{ job_salary_max }}FCFA
              </li>
              <li class="vr"></li>
              <li>63 Applicant</li>
            </ul>
          </div>
          <div class="flex-shrink-0">
            <button
              class="btn btn-success"
              data-bs-toggle="modal"
              data-bs-target="#applyModal"
            >
              Apply Now <i class="bi bi-arrow-right align-baseline ms-1"></i>
            </button>
            <button
              type="button"
              class="btn btn-warning btn-soft"
              data-bs-toggle="button"
            >
              <i class="bi bi-bookmark-star"></i>
            </button>
          </div>
        </div>
      </div>
      <!-- .col-->
    </div>
    <!--.row-->
  </div>
  <!-- /container-->
</div>

<section *ngIf="!isJobLoading" class="wrapper-box">
  <div class="container">
    <div class="row">
      <div class="col-xxl-9">
        <h6 class="font-18">Job Description</h6>
        <p class="text-muted mb-4">
          {{ job_description }}
        </p>

        <h6 class="font-18 mb-3">Requirements and skills</h6>
        <ul class="vstack gap-2 text-muted mb-4">
          <li *ngFor="let c of criteriaList | keyvalue">
            {{ c.key }}
          </li>
        </ul>

        <h6 class="font-18 mb-3">Share Profile</h6>

        <div class="hstack gap-2 flex-wrap mb-3">
          <a href="#!" class="btn btn-primary"
            ><i class="bi bi-facebook me-1 align-baseline"></i> Facebook</a
          >
          <a href="#!" class="btn btn-success"
            ><i class="bi bi-whatsapp me-1 align-baseline"></i> WhatsApp</a
          >
          <a href="#!" class="btn btn-info"
            ><i class="bi bi-linkedin me-1 align-baseline"></i> Linkedin</a
          >
          <a href="#!" class="btn btn-danger"
            ><i class="bi bi-envelope me-1 align-baseline"></i> Email</a
          >
        </div>

        <h6 class="font-18 mb-3">Location</h6>

        <iframe
          class="border-0 w-100 rounded"
          height="400"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6511979.223877263!2d-124.59185623546793!3d37.160370665002034!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x808fb9fe5f285e3d%3A0x8b5109a227086f55!2sCalifornia%2C%20USA!5e0!3m2!1sen!2sin!4v1687098090269!5m2!1sen!2sin"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
        ></iframe>
      </div>
      <div class="col-xxl-3">
        <div class="card">
          <div class="card-body">
            <h6 class="font-16 mb-4">Job Overview</h6>
            <div class="d-flex gap-2 mb-3">
              <div class="square-xs flex-shrink-0">
                <div class="square-content bg-light text-body rounded">
                  <i class="bi bi-calendar"></i>
                </div>
              </div>
              <div>
                <h6 class="font-14 fw-normal mb-1">Date Posted</h6>
                <p class="mb-0 font-13 text-muted">13 min ago</p>
              </div>
            </div>
            <div class="d-flex gap-2 mb-3">
              <div class="square-xs flex-shrink-0">
                <div class="square-content bg-light text-body rounded">
                  <i class="bi bi-eye"></i>
                </div>
              </div>
              <div>
                <h6 class="font-14 fw-normal mb-1">Post Views</h6>
                <p class="mb-0 font-13 text-muted">6487</p>
              </div>
            </div>
            <div class="d-flex gap-2 mb-3">
              <div class="square-xs flex-shrink-0">
                <div class="square-content bg-light text-body rounded">
                  <i class="bi bi-card-text"></i>
                </div>
              </div>
              <div>
                <h6 class="font-14 fw-normal mb-1">Applicants</h6>
                <p class="mb-0 font-13 text-muted">24</p>
              </div>
            </div>
            <div class="d-flex gap-2 mb-3">
              <div class="square-xs flex-shrink-0">
                <div class="square-content bg-light text-body rounded">
                  <i class="bi bi-geo-alt"></i>
                </div>
              </div>
              <div>
                <h6 class="font-14 fw-normal mb-1">Location</h6>
                <p class="mb-0 font-13 text-muted">{{ job_location }}</p>
              </div>
            </div>
            <!-- <div class="d-flex gap-2 mb-3">
              <div class="square-xs flex-shrink-0">
                <div class="square-content bg-light text-body rounded">
                  <i class="bi bi-clock"></i>
                </div>
              </div>
              <div>
                <h6 class="font-14 fw-normal mb-1">Experience</h6>
                <p class="mb-0 font-13 text-muted">2+ Years</p>
              </div>
            </div> -->
            <!-- <div class="d-flex gap-2 mb-3">
              <div class="square-xs flex-shrink-0">
                <div class="square-content bg-light text-body rounded">
                  <i class="bi bi-buildings"></i>
                </div>
              </div>
              <div>
                <h6 class="font-14 fw-normal mb-1">Qualification</h6>
                <p class="mb-0 font-13 text-muted">Bachelor Degree</p>
              </div>
            </div> -->
            <div class="d-flex gap-2">
              <div class="square-xs flex-shrink-0">
                <div class="square-content bg-light text-body rounded">
                  <i class="bi bi-cash"></i>
                </div>
              </div>
              <div>
                <h6 class="font-14 fw-normal mb-1">Salary</h6>
                <p class="mb-0 font-13 text-muted">
                  {{ job_salary_min }}FCFA - {{ job_salary_max }}FCFA
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="card">
          <div class="card-body">
            <h6 class="font-16 mb-4">Job Skills</h6>
            <div class="hstack gap-2 align-items-center flex-wrap">
              <span class="badge bg-secondary-subtle text-secondary"
                >Communication</span
              >
              <span class="badge bg-secondary-subtle text-secondary"
                >Marketing</span
              >
              <span class="badge bg-secondary-subtle text-secondary"
                >Business</span
              >
              <span class="badge bg-secondary-subtle text-secondary"
                >ReactJs</span
              >
              <span class="badge bg-secondary-subtle text-secondary"
                >Angular</span
              >
              <span class="badge bg-secondary-subtle text-secondary"
                >JavaScript</span
              >
              <span class="badge bg-secondary-subtle text-secondary"
                >Bootstrap</span
              >
            </div>
          </div>
        </div> -->
        <div class="card">
          <div class="card-body">
            <h6 class="font-16 mb-4">Contact Us</h6>

            <form action="#!">
              <div class="mb-3">
                <input type="text" class="form-control" placeholder="Subject" />
              </div>
              <div class="mb-3">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter your name"
                />
              </div>
              <div class="mb-3">
                <input
                  type="email"
                  class="form-control"
                  placeholder="Enter your email"
                />
              </div>
              <div class="mb-3">
                <textarea
                  class="form-control"
                  id="exampleFormControlTextarea1"
                  rows="3"
                ></textarea>
              </div>
              <div>
                <button class="btn btn-success w-100">Send Message</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <!--.col-->
    </div>
    <!--.row-->
  </div>
  <!--.container-->
</section>

<!-- notification-container -->
<notifier-container></notifier-container>

<!-- Modal -->
<div
  class="modal fade"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  id="applyModal"
  tabindex="-1"
  aria-labelledby="createModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="createModalLabel">Apply</h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <!-- login error -->
        <div
          *ngIf="!is_user_connected"
          class="alert alert-primary text-primary"
          role="alert"
        >
          Please, Login to submit
          <a
            data-bs-dismiss="modal"
            routerLink="/login"
            class="ms-3 text-decoration-underline"
            >Login</a
          >
        </div>

        <!-- display success alert -->
        <div
          *ngIf="!is_user_connected"
          class="alert alert-success text-success"
          role="alert"
        >
          Your application has been sent successfully. You will receive a
          notification if you are selected.
        </div>
        <div action="#!">
          <div class="row g-3">
            <div class="col-lg-12">
              <div>
                <label for="formFile" class="form-label font-15 fw-medium"
                  >Upload your cv</label
                >
                <input
                  class="form-control"
                  (change)="onFileSelected($event)"
                  accept=".pdf"
                  type="file"
                  id="formFile"
                />
              </div>
            </div>
            <div class="col-lg-12">
              <div>
                <label for="fullName" class="form-label font-15 fw-medium"
                  >Full Name</label
                >
                <input
                  disabled
                  type="text"
                  class="form-control"
                  id="fullName"
                  placeholder="Enter name"
                />
              </div>
            </div>
            <div class="col-lg-12">
              <div>
                <label for="roleInput" class="form-label font-15 fw-medium"
                  >Role</label
                >
                <input
                  disabled
                  [(ngModel)]="job_title"
                  type="text"
                  class="form-control"
                  id="roleInput"
                  placeholder="Role"
                />
              </div>
            </div>
            <div class="col-lg-12">
              <div>
                <label for="roleInput" class="form-label font-15 fw-medium"
                  >Email Address</label
                >
                <input
                  disabled
                  type="email"
                  class="form-control"
                  id="roleInput"
                  placeholder="Email address"
                />
              </div>
            </div>
            <div class="col-lg-12">
              <div>
                <label
                  for="contactNumberInput"
                  class="form-label font-15 fw-medium"
                  >Contact Number</label
                >
                <input
                  disabled
                  type="number"
                  class="form-control"
                  id="contactNumberInput"
                  placeholder="Contact number"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button
          [disabled]="applied"
          type="button"
          class="btn btn-light"
          data-bs-dismiss="modal"
        >
          Cancel
        </button>

        <!-- apply btn -->
        <button
          *ngIf="applied == false"
          (click)="apply()"
          type="button"
          class="btn btn-secondary"
          [disabled]="!is_user_connected || isApplying || cv == null"
        >
          <span
            *ngIf="isApplying"
            class="spinner-border spinner-border-sm me-2"
          ></span>
          Apply
        </button>

        <!-- finish btn -->
        <button
          *ngIf="applied == true"
          type="button"
          class="btn btn-secondary"
          data-bs-dismiss="modal"
        >
          Finish
        </button>
      </div>
    </div>
  </div>
</div>
